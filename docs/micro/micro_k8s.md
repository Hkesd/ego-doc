# Ego In K8S Flow
## 架构演进
单体应用时期
垂直应用时期
微服务时期
云原生时期

## 什么是微服务

## 微服务冰山模型


- 能够有统一完整的标准
    - 每个人写的代码都基本一致，谁都可以维护
    - 线上出了问题，不用问repo在哪，配置在哪、日志在哪
    - 框架中的基础组件可以更好的适应基础建设，省去无谓的适配
- 能够有公司所需要的所有组件
    - 无需让业务方搭乐高
    - 配置驱动组件，所有组件用法保持一致，降低心智负担
    - 编写文档更加方便
    - 方便对组件的统一治理
- 统一mono repo
    - 对业务方屏蔽具体底层实现，业务方只需要对框架升级版本即可
    - 节约人力成本、方便ci
## 微服务存在的痛点
* 代码风格迥异
  * 各种各样配置玩法
  * 不同组件库
  * 不同的监控、日志指标
  * 技术壁垒
* 复杂度高
  * 故障、过载、一致性
  * 定位难
  * 恢复慢
  * 可用性低
* 基础设施滞后于微服务的发展
  * 框架
  * 容器  
  * 工具
  * 平台
  * 规范

## 怎么做好微服务
* 规范
  * 编译规范
  * 配置规范
  * 注册规范
  * 日志规范
  * 监控规范
* 容器
  * 隔离
  * 调度
  * 成本
* 平台（运维，全生命周期的管理）
  * 发布
  * 配置
  * 日志
  * 监控
  * 报警
  * 接口  
  * 文档
  * ...
* 工具
  * 构建
  * 生成  
  * 辅助
* 框架（编码）


* 代码风格迥异，不易上手
* 统一所有包的使用方式，包括配置驱动、统一错误码等
* 第三方包的wrap，增加access log(req,res)、slow log、trace、metric、timeout
* 组件最佳配置

* 没有框架、组件库的不统一
* 没有基础设施、各种手动运维


## 开发
https://segmentfault.com/a/1190000040165081